import{a as n,b as a,s as e,i as c}from"./utils-UJ-EUY8v.js";async function i(){try{return(await c.get("users")).data}catch{return e("اینترنت خود را بررسی کنید!"),null}}async function l(){let t=n();if(!t)return null;try{const s=await a.get("me",{headers:{Authorization:`Bearer ${t}`}});return console.log(s),s.data}catch(s){return console.log(s),null}}async function f(t){return await a.post("register",{...t}).then(s=>({status:!0})).catch(s=>(s.message=="Request failed with status code 403"?e("ایمیل یا نام کاربری قبلا استفاده شده است"):e("ساخت حساب با مشکل مواجه شد"),{status:!1}))}async function g(t){try{const s=await a.post("login",t);if(console.log(s),s.data.token){if(s.data.token)return e("با موفقیت وارد شدید","success"),localStorage.setItem("token",s.data.token),{status:!0}}else return e("ایمیل یا رمز عبور درست نیست"),{status:!1}}catch(s){return s.status?e("ایمیل یا رمز عبور درست نیست"):e("مشکلی به وجود آمده!"),console.log(s),{status:!1}}}async function h(t,s,r){try{const o=await c.post(`users/${s}`,{id:s});return e(`${t==="block"?"کاربر مسدود شد":"کاربر رفع انسداد شد"}`,"success"),{status:!0}}catch{return e("مشکلی به وجود آمده! دوباره امتحان کنید"),{status:!1}}finally{r()}}async function p(t,s,r){try{const o=await c.patch(`users/${t}`,{id:t,role:s});return s=="admin"&&e("ادمین با موفقیت انتخاب شد","success"),s=="user"&&e("ادمین با موفقیت حذف شد","success"),{status:!0}}catch{return s=="admin"&&e("مشکلی در انتخاب ادمین به وجود آمده!"),s=="user"&&e("مشکلی در حذف ادمین به وجود آمده!"),{status:!1}}finally{r()}}async function y(t){console.log(`token ${n()}`,t);try{if((await a.patch("me",t,{headers:{Authorization:"Bearer "+n()}})).status===200)return e("اطلاعات شما با موفقیت ویرایش شد","success"),{status:!0};throw new Error("Error in update user")}catch{return e("مشکلی در ویرایش اطلاعات شما به وجود آمده"),{status:!1}}}async function w(t,s){console.log(`token ${n()}`,t);try{const r=await a.patch("me?changePassword=true",t,{headers:{Authorization:"Bearer "+n()}});if(console.log(r),r.status===200)return e("رمز شما با موفقیت عوض شد","success"),{status:!0};throw new Error("Error in update user")}catch(r){return e("مشکلی در ویرایش رمز شما به وجود آمده"),console.log(r),{status:!1}}finally{s()}}async function A(t,s){console.log(t);try{const r=await a.post("verify-otp",t);return console.log(r),{status:!0}}catch{return{status:!1}}finally{s()}}async function d(t){try{const s=await a.post("send-otp",t);return e("کد برای شما ارسال شد","success"),console.log(s),{status:!0}}catch(s){return e("مشکلی در ارسال مجدد کد به وجود آمده"),console.log(s),{status:!1}}}async function k(t){try{const s=await a.post("me",{image:t},{headers:{Authorization:"Bearer "+n()}});return console.log("changeUserProfileApi =>",s),e("پروفایل با موفقیت عوض شد","success"),{status:!0}}catch(s){return e("تغییر پروفایل موفق نبود"),console.log("changeUserProfileApi =>",s),{status:!1}}}async function m(){try{const t=await a.get("logout",{headers:{Authorization:"Bearer "+n()}});return console.log(t),e("با موفقیت خارج شدید","success"),{status:!0}}catch(t){return console.log(t),e("خروج ناموفق بود"),{status:!1}}}export{d as a,k as b,w as c,m as d,y as e,i as f,l as g,p as h,h as i,g as l,f as r,A as v};
